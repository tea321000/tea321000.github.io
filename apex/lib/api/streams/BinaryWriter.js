"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.BinaryWriter = void 0;
class BinaryWriter {
    constructor() {
        this.buffer = new DataView(new ArrayBuffer(8192));
        this.offset = 0;
    }
    hasBytes() {
        return Boolean(this.offset);
    }
    writeByteArray(value) {
        this.writeUInt16(value.byteLength);
        for (let i = 0; i < value.byteLength; i++) {
            this.writeUInt8(value.getInt8(i));
        }
    }
    writeEntityArray(values) {
        this.writeUInt16(values.length);
        values.forEach(x => x.write(this));
    }
    writeUInt8(value) {
        this.buffer.setUint8(this.offset, value);
        this.offset += 1;
    }
    writeUInt16(value) {
        this.buffer.setUint16(this.offset, value, true);
        this.offset += 2;
    }
    writeUInt64(value) {
        this.buffer.setBigUint64(this.offset, value, true);
        this.offset += 8;
    }
    toBuffer() {
        return new DataView(this.buffer.buffer, 0, this.offset);
    }
}
exports.BinaryWriter = BinaryWriter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmluYXJ5V3JpdGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2xpYi9hcGkvc3RyZWFtcy9CaW5hcnlXcml0ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEsTUFBYSxZQUFZO0lBSXZCO1FBQ0UsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLFFBQVEsQ0FBQyxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQ2xCLENBQUM7SUFFRCxRQUFRO1FBQ04sT0FBTyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFRCxjQUFjLENBQUMsS0FBZTtRQUM1QixJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNuQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLFVBQVUsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN6QyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNuQztJQUNILENBQUM7SUFFRCxnQkFBZ0IsQ0FBQyxNQUFnQztRQUMvQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNoQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFFRCxVQUFVLENBQUMsS0FBYTtRQUN0QixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDO0lBQ25CLENBQUM7SUFFRCxXQUFXLENBQUMsS0FBYTtRQUN2QixJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNoRCxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQztJQUNuQixDQUFDO0lBRUQsV0FBVyxDQUFDLEtBQWE7UUFDdkIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDbkQsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUM7SUFDbkIsQ0FBQztJQUVELFFBQVE7UUFDTixPQUFPLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDMUQsQ0FBQztDQUNGO0FBM0NELG9DQTJDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGFwcCBmcm9tICcuLic7XHJcblxyXG5leHBvcnQgY2xhc3MgQmluYXJ5V3JpdGVyIHtcclxuICBwcml2YXRlIHJlYWRvbmx5IGJ1ZmZlcjogRGF0YVZpZXc7XHJcbiAgcHJpdmF0ZSBvZmZzZXQ6IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmJ1ZmZlciA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoODE5MikpO1xyXG4gICAgdGhpcy5vZmZzZXQgPSAwO1xyXG4gIH1cclxuXHJcbiAgaGFzQnl0ZXMoKSB7XHJcbiAgICByZXR1cm4gQm9vbGVhbih0aGlzLm9mZnNldCk7XHJcbiAgfVxyXG5cclxuICB3cml0ZUJ5dGVBcnJheSh2YWx1ZTogRGF0YVZpZXcpIHtcclxuICAgIHRoaXMud3JpdGVVSW50MTYodmFsdWUuYnl0ZUxlbmd0aCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmJ5dGVMZW5ndGg7IGkrKykge1xyXG4gICAgICB0aGlzLndyaXRlVUludDgodmFsdWUuZ2V0SW50OChpKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB3cml0ZUVudGl0eUFycmF5KHZhbHVlczogQXJyYXk8YXBwLklQYWNrZXRXcml0ZXI+KSB7XHJcbiAgICB0aGlzLndyaXRlVUludDE2KHZhbHVlcy5sZW5ndGgpO1xyXG4gICAgdmFsdWVzLmZvckVhY2goeCA9PiB4LndyaXRlKHRoaXMpKTtcclxuICB9XHJcblxyXG4gIHdyaXRlVUludDgodmFsdWU6IG51bWJlcikge1xyXG4gICAgdGhpcy5idWZmZXIuc2V0VWludDgodGhpcy5vZmZzZXQsIHZhbHVlKTtcclxuICAgIHRoaXMub2Zmc2V0ICs9IDE7XHJcbiAgfVxyXG5cclxuICB3cml0ZVVJbnQxNih2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLmJ1ZmZlci5zZXRVaW50MTYodGhpcy5vZmZzZXQsIHZhbHVlLCB0cnVlKTtcclxuICAgIHRoaXMub2Zmc2V0ICs9IDI7XHJcbiAgfVxyXG5cclxuICB3cml0ZVVJbnQ2NCh2YWx1ZTogYmlnaW50KSB7XHJcbiAgICB0aGlzLmJ1ZmZlci5zZXRCaWdVaW50NjQodGhpcy5vZmZzZXQsIHZhbHVlLCB0cnVlKTtcclxuICAgIHRoaXMub2Zmc2V0ICs9IDg7XHJcbiAgfVxyXG4gIFxyXG4gIHRvQnVmZmVyKCkge1xyXG4gICAgcmV0dXJuIG5ldyBEYXRhVmlldyh0aGlzLmJ1ZmZlci5idWZmZXIsIDAsIHRoaXMub2Zmc2V0KTtcclxuICB9XHJcbn1cclxuIl19