"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Player = void 0;
const app = require("..");
class Player extends app.api.Adapter {
    constructor(address, localOrigin = new app.Vector(app.entityOffsets.localOrigin), teamNum = new app.UInt8(app.entityOffsets.iTeamNum, 1000), name = new app.UInt64(app.entityOffsets.iName, 1000), glowEnable = new app.UInt8(app.entityOffsets.glowEnable), glowThroughWalls = new app.UInt8(app.entityOffsets.glowThroughWall), lifeState = new app.UInt8(app.playerOffsets.lifeState), viewAngles = new app.Vector(app.playerOffsets.viewAngles), bleedoutState = new app.UInt8(app.playerOffsets.bleedoutState)) {
        super(new app.api.Entity(address, [localOrigin, teamNum, name, glowEnable, glowThroughWalls, lifeState, viewAngles, bleedoutState]));
        this.address = address;
        this.localOrigin = localOrigin;
        this.teamNum = teamNum;
        this.name = name;
        this.glowEnable = glowEnable;
        this.glowThroughWalls = glowThroughWalls;
        this.lifeState = lifeState;
        this.viewAngles = viewAngles;
        this.bleedoutState = bleedoutState;
    }
    get isValid() {
        return this.name.value
            && !this.lifeState.value
            && !app.shallowEquals(this.localOrigin.value, { x: 0, y: 0, z: 0 });
    }
    createColor(otherPlayer) {
        return this.isSameTeam(otherPlayer)
            ? (this.bleedoutState.value ? '#FFFF00' : '#00FF00')
            : (this.bleedoutState.value ? '#FFA500' : '#FF0000');
    }
    isSameTeam(otherPlayer) {
        return this.teamNum.value === otherPlayer.teamNum.value;
    }
    toString() {
        return app.serialize(this);
    }
}
exports.Player = Player;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGxheWVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2xpYi9jb3JlL2NsYXNzZXMvUGxheWVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDBCQUEwQjtBQUUxQixNQUFhLE1BQU8sU0FBUSxHQUFHLENBQUMsR0FBRyxDQUFDLE9BQXVCO0lBQ3pELFlBQ1csT0FBZSxFQUNmLGNBQWMsSUFBSSxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLEVBQzNELFVBQVUsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUN6RCxPQUFPLElBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsRUFDcEQsYUFBYSxJQUFJLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsRUFDeEQsbUJBQW1CLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQyxFQUNuRSxZQUFZLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxFQUN0RCxhQUFhLElBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxFQUN6RCxnQkFBZ0IsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDO1FBQ3ZFLEtBQUssQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDLFdBQVcsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxnQkFBZ0IsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQVQ1SCxZQUFPLEdBQVAsT0FBTyxDQUFRO1FBQ2YsZ0JBQVcsR0FBWCxXQUFXLENBQWdEO1FBQzNELFlBQU8sR0FBUCxPQUFPLENBQWtEO1FBQ3pELFNBQUksR0FBSixJQUFJLENBQWdEO1FBQ3BELGVBQVUsR0FBVixVQUFVLENBQThDO1FBQ3hELHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBbUQ7UUFDbkUsY0FBUyxHQUFULFNBQVMsQ0FBNkM7UUFDdEQsZUFBVSxHQUFWLFVBQVUsQ0FBK0M7UUFDekQsa0JBQWEsR0FBYixhQUFhLENBQWlEO0lBRXpFLENBQUM7SUFFRCxJQUFJLE9BQU87UUFDVCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSztlQUNqQixDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSztlQUNyQixDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsRUFBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBQyxDQUFDLENBQUM7SUFDdEUsQ0FBQztJQUVELFdBQVcsQ0FBQyxXQUF1QjtRQUNqQyxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDO1lBQ2pDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztZQUNwRCxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBRUQsVUFBVSxDQUFDLFdBQXVCO1FBQ2hDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEtBQUssV0FBVyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUM7SUFDMUQsQ0FBQztJQUVELFFBQVE7UUFDTixPQUFPLEdBQUcsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0IsQ0FBQztDQUNGO0FBakNELHdCQWlDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGFwcCBmcm9tICcuLic7XHJcblxyXG5leHBvcnQgY2xhc3MgUGxheWVyIGV4dGVuZHMgYXBwLmFwaS5BZGFwdGVyPGFwcC5hcGkuRW50aXR5PiB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICByZWFkb25seSBhZGRyZXNzOiBiaWdpbnQsXHJcbiAgICByZWFkb25seSBsb2NhbE9yaWdpbiA9IG5ldyBhcHAuVmVjdG9yKGFwcC5lbnRpdHlPZmZzZXRzLmxvY2FsT3JpZ2luKSxcclxuICAgIHJlYWRvbmx5IHRlYW1OdW0gPSBuZXcgYXBwLlVJbnQ4KGFwcC5lbnRpdHlPZmZzZXRzLmlUZWFtTnVtLCAxMDAwKSxcclxuICAgIHJlYWRvbmx5IG5hbWUgPSBuZXcgYXBwLlVJbnQ2NChhcHAuZW50aXR5T2Zmc2V0cy5pTmFtZSwgMTAwMCksXHJcbiAgICByZWFkb25seSBnbG93RW5hYmxlID0gbmV3IGFwcC5VSW50OChhcHAuZW50aXR5T2Zmc2V0cy5nbG93RW5hYmxlKSxcclxuICAgIHJlYWRvbmx5IGdsb3dUaHJvdWdoV2FsbHMgPSBuZXcgYXBwLlVJbnQ4KGFwcC5lbnRpdHlPZmZzZXRzLmdsb3dUaHJvdWdoV2FsbCksXHJcbiAgICByZWFkb25seSBsaWZlU3RhdGUgPSBuZXcgYXBwLlVJbnQ4KGFwcC5wbGF5ZXJPZmZzZXRzLmxpZmVTdGF0ZSksXHJcbiAgICByZWFkb25seSB2aWV3QW5nbGVzID0gbmV3IGFwcC5WZWN0b3IoYXBwLnBsYXllck9mZnNldHMudmlld0FuZ2xlcyksXHJcbiAgICByZWFkb25seSBibGVlZG91dFN0YXRlID0gbmV3IGFwcC5VSW50OChhcHAucGxheWVyT2Zmc2V0cy5ibGVlZG91dFN0YXRlKSkge1xyXG4gICAgc3VwZXIobmV3IGFwcC5hcGkuRW50aXR5KGFkZHJlc3MsIFtsb2NhbE9yaWdpbiwgdGVhbU51bSwgbmFtZSwgZ2xvd0VuYWJsZSwgZ2xvd1Rocm91Z2hXYWxscywgbGlmZVN0YXRlLCB2aWV3QW5nbGVzLCBibGVlZG91dFN0YXRlXSkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGlzVmFsaWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5uYW1lLnZhbHVlXHJcbiAgICAgICYmICF0aGlzLmxpZmVTdGF0ZS52YWx1ZVxyXG4gICAgICAmJiAhYXBwLnNoYWxsb3dFcXVhbHModGhpcy5sb2NhbE9yaWdpbi52YWx1ZSwge3g6IDAsIHk6IDAsIHo6IDB9KTtcclxuICB9XHJcbiAgXHJcbiAgY3JlYXRlQ29sb3Iob3RoZXJQbGF5ZXI6IGFwcC5QbGF5ZXIpIHtcclxuICAgIHJldHVybiB0aGlzLmlzU2FtZVRlYW0ob3RoZXJQbGF5ZXIpXHJcbiAgICAgID8gKHRoaXMuYmxlZWRvdXRTdGF0ZS52YWx1ZSA/ICcjRkZGRjAwJyA6ICcjMDBGRjAwJylcclxuICAgICAgOiAodGhpcy5ibGVlZG91dFN0YXRlLnZhbHVlID8gJyNGRkE1MDAnIDogJyNGRjAwMDAnKTtcclxuICB9XHJcblxyXG4gIGlzU2FtZVRlYW0ob3RoZXJQbGF5ZXI6IGFwcC5QbGF5ZXIpIHtcclxuICAgIHJldHVybiB0aGlzLnRlYW1OdW0udmFsdWUgPT09IG90aGVyUGxheWVyLnRlYW1OdW0udmFsdWU7XHJcbiAgfVxyXG5cclxuICB0b1N0cmluZygpIHtcclxuICAgIHJldHVybiBhcHAuc2VyaWFsaXplKHRoaXMpO1xyXG4gIH1cclxufVxyXG4iXX0=