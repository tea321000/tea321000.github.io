"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CString = void 0;
const app = require("..");
class CString extends app.api.Adapter {
    constructor(offset, interval, size) {
        super(new app.api.EntityMember(offset, interval, size));
    }
    get value() {
        let result = '';
        iterateBytes(this.source.buffer, x => result += x);
        return result;
    }
    toString() {
        return this.value.toString();
    }
}
exports.CString = CString;
function iterateBytes(buffer, add) {
    for (let i = 0; i < buffer.byteLength; i++) {
        const charCode = buffer.getUint8(i);
        if (charCode === 0)
            break;
        add(String.fromCharCode(charCode));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ1N0cmluZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9saWIvY29yZS90eXBlcy9DU3RyaW5nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDBCQUEwQjtBQUUxQixNQUFhLE9BQVEsU0FBUSxHQUFHLENBQUMsR0FBRyxDQUFDLE9BQTZCO0lBQ2hFLFlBQVksTUFBYyxFQUFFLFFBQWdCLEVBQUUsSUFBWTtRQUN4RCxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDMUQsQ0FBQztJQUVELElBQUksS0FBSztRQUNQLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNoQixZQUFZLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDbkQsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQUVELFFBQVE7UUFDTixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDL0IsQ0FBQztDQUNGO0FBZEQsMEJBY0M7QUFFRCxTQUFTLFlBQVksQ0FBQyxNQUFnQixFQUFFLEdBQTRCO0lBQ2xFLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQzFDLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDcEMsSUFBSSxRQUFRLEtBQUssQ0FBQztZQUFFLE1BQU07UUFDMUIsR0FBRyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztLQUNwQztBQUNILENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBhcHAgZnJvbSAnLi4nO1xyXG5cclxuZXhwb3J0IGNsYXNzIENTdHJpbmcgZXh0ZW5kcyBhcHAuYXBpLkFkYXB0ZXI8YXBwLmFwaS5FbnRpdHlNZW1iZXI+IHtcclxuICBjb25zdHJ1Y3RvcihvZmZzZXQ6IG51bWJlciwgaW50ZXJ2YWw6IG51bWJlciwgc2l6ZTogbnVtYmVyKSB7XHJcbiAgICBzdXBlcihuZXcgYXBwLmFwaS5FbnRpdHlNZW1iZXIob2Zmc2V0LCBpbnRlcnZhbCwgc2l6ZSkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHZhbHVlKCkge1xyXG4gICAgbGV0IHJlc3VsdCA9ICcnO1xyXG4gICAgaXRlcmF0ZUJ5dGVzKHRoaXMuc291cmNlLmJ1ZmZlciwgeCA9PiByZXN1bHQgKz0geCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgdG9TdHJpbmcoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZS50b1N0cmluZygpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaXRlcmF0ZUJ5dGVzKGJ1ZmZlcjogRGF0YVZpZXcsIGFkZDogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQpIHtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlci5ieXRlTGVuZ3RoOyBpKyspIHtcclxuICAgIGNvbnN0IGNoYXJDb2RlID0gYnVmZmVyLmdldFVpbnQ4KGkpO1xyXG4gICAgaWYgKGNoYXJDb2RlID09PSAwKSBicmVhaztcclxuICAgIGFkZChTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlKSk7XHJcbiAgfVxyXG59XHJcbiJdfQ==