(()=>{"use strict";var e={394:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Channel=void 0;const s=i(575);t.Channel=class{constructor(e){this.socket=new WebSocket(`ws://${location.host}/ws/direct/${e}`),this.socket.binaryType="arraybuffer",this.socket.addEventListener("message",(e=>this.receive(e))),this.tracker=new s.Tracker}create(e){this.tracker.create(e.source)}delete(e){this.tracker.delete(e.source)}async runAsync(e){for(;;)switch(this.socket.readyState){case this.socket.CONNECTING:await new Promise(requestAnimationFrame);break;case this.socket.OPEN:e(),this.update(),await new Promise(requestAnimationFrame);break;default:throw new Error("Invalid channel state!")}}receive(e){if(e.data instanceof ArrayBuffer){const t=new s.BinaryReader(new DataView(e.data));for(;t.hasBytes();)if(t.readUInt8()===s.PacketType.Update)this.tracker.receive(s.UpdateArray.create(t))}}update(){const e=new s.BinaryWriter;this.tracker.update(e),!this.nextActiveTime||this.nextActiveTime<Date.now()?(e.writeUInt8(s.PacketType.Activity),this.nextActiveTime=Date.now()+1e4,this.socket.send(e.toBuffer())):e.hasBytes()&&this.socket.send(e.toBuffer())}}},578:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Process=void 0;const s=i(575);t.Process=class{constructor(e,t=e.args,i=e.command,s=e.pid){this.args=t,this.command=i,this.pid=s}async regionsAsync(){const e=await fetch(`/api/proc/${this.pid}/maps`);return(await e.json()).map((e=>new s.Region(e)))}}},517:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Region=void 0;function i(e){return/^0x/i.test(e)?BigInt(e):BigInt(`0x${e}`)}t.Region=class{constructor(e,t=i(e.start),s=i(e.end),r=e.perms,a=i(e.offset),n=e.devMajor,o=e.devMinor,c=i(e.inode),l=e.pathname){this.start=t,this.end=s,this.perms=r,this.offset=a,this.devMajor=n,this.devMinor=o,this.inode=c,this.pathname=l}}},364:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;const s=i(575);t.Server=class{async processesAsync(){const e=await fetch("/api/proc");return(await e.json()).map((e=>new s.Process(e)))}async versionAsync(){const e=await fetch("/api/version");return await e.json().catch((()=>0))}}},292:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PacketType=void 0,function(e){e[e.Activity=0]="Activity",e[e.ChangeEntity=1]="ChangeEntity",e[e.CreateEntity=2]="CreateEntity",e[e.DeleteEntity=3]="DeleteEntity",e[e.Update=4]="Update"}(t.PacketType||(t.PacketType={}))},821:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},575:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,r)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(292),t),r(i(821),t),r(i(601),t),r(i(944),t),r(i(721),t),r(i(34),t),r(i(484),t),r(i(824),t),r(i(540),t),r(i(217),t),r(i(445),t),r(i(318),t),r(i(844),t),r(i(201),t),r(i(257),t),r(i(486),t),r(i(394),t),r(i(578),t),r(i(517),t),r(i(364),t)},601:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Adapter=void 0;t.Adapter=class{constructor(e){this.source=e}}},944:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Entity=void 0;const s=i(575);t.Entity=class{constructor(e,t){this.emitter=new EventTarget,this.address=e,this.members=function(e){const t={};for(const i of e)t[i.offset.toString(16)]??=i;return t}(t.map((e=>e.source)))}receive(e){this.emitter.dispatchEvent(new Event("preReceive")),e.members.forEach((e=>this.members[e.offset.toString(16)]?.receive(e))),this.emitter.dispatchEvent(new Event("postReceive"))}update(){const e=Object.values(this.members).map((e=>e.update())).filter(Boolean).map((e=>e));return e.length?new s.ChangeEntity(this.address,e):void 0}}},721:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EntityMember=void 0;const s=i(575);t.EntityMember=class{constructor(e,t,i){this.buffer=new DataView(new ArrayBuffer(i)),this.interval=t,this.offset=e}receive(e){if(e.buffer.byteLength===this.buffer.byteLength)for(let t=0;t<e.buffer.byteLength;t++)this.buffer.setInt8(t,e.buffer.getInt8(t))}update(){const e=this.sendChange&&new s.ChangeEntityMember(this.offset,this.sendChange);return delete this.sendChange,e}}},34:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tracker=void 0;const s=i(575);t.Tracker=class{constructor(){this.aliveEntities={},this.createEntities={},this.deleteEntities={}}create(e){const t=e.address.toString(16);if(this.aliveEntities[t]||this.createEntities[t])throw new Error(`Duplicate entity: ${t}`);this.createEntities[t]=e}delete(e){const t=e.address.toString(16);if(this.deleteEntities[t])throw new Error(`Pending entity: ${e}`);this.createEntities[t]?delete this.createEntities[t]:this.aliveEntities[t]&&(this.deleteEntities[t]=this.aliveEntities[t],delete this.aliveEntities[t])}receive(e){for(const t of e.entities)this.aliveEntities[t.address.toString(16)]?.receive(t)}update(e){for(const[t,i]of Object.entries(this.deleteEntities)){const r=new s.DeleteEntity(i.address);e.writeUInt8(s.PacketType.DeleteEntity),r.write(e),delete this.deleteEntities[t]}for(const[t,i]of Object.entries(this.createEntities)){this.aliveEntities[t]=i;const r=Object.values(i.members).map((e=>new s.CreateEntityMember(e.offset,e.interval,e.buffer.byteLength))),a=new s.CreateEntity(i.address,r);e.writeUInt8(s.PacketType.CreateEntity),a.write(e),delete this.createEntities[t]}for(const t of Object.values(this.aliveEntities)){const i=t.update();i&&(e.writeUInt8(s.PacketType.ChangeEntity),i.write(e))}}}},484:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeEntity=void 0;t.ChangeEntity=class{constructor(e,t){this.address=e,this.changes=t}write(e){e.writeUInt64(this.address),e.writeEntityArray(this.changes)}}},824:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeEntityMember=void 0;t.ChangeEntityMember=class{constructor(e,t){this.offset=e,this.buffer=t}write(e){e.writeUInt16(this.offset),e.writeByteArray(this.buffer)}}},540:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateEntity=void 0;t.CreateEntity=class{constructor(e,t){this.address=e,this.members=t}write(e){e.writeUInt64(this.address),e.writeEntityArray(this.members)}}},217:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateEntityMember=void 0;t.CreateEntityMember=class{constructor(e,t,i){this.offset=e,this.interval=t,this.size=i}write(e){e.writeUInt16(this.offset),e.writeUInt16(this.interval),e.writeUInt16(this.size)}}},445:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteEntity=void 0;t.DeleteEntity=class{constructor(e){this.address=e}write(e){e.writeUInt64(this.address)}}},318:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateArray=void 0;const s=i(575);class r{constructor(e){this.entities=e}static create(e){const t=e.readEntityArray(s.UpdateEntity.create);return new r(t)}}t.UpdateArray=r},844:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateEntity=void 0;const s=i(575);class r{constructor(e,t){this.address=e,this.members=t}static create(e){const t=e.readUInt64(),i=e.readEntityArray(s.UpdateEntityMember.create);return new r(t,i)}}t.UpdateEntity=r},201:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateEntityMember=void 0;class i{constructor(e,t){this.offset=e,this.buffer=t}static create(e){const t=e.readUInt16(),s=e.readByteArray();return new i(t,s)}}t.UpdateEntityMember=i},257:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BinaryReader=void 0;t.BinaryReader=class{constructor(e){this.buffer=e,this.offset=0}hasBytes(){return this.offset<this.buffer.byteLength-this.buffer.byteOffset}readByteArray(){const e=this.readUInt16(),t=new DataView(this.buffer.buffer,this.buffer.byteOffset+this.offset,e);return this.offset+=e,t}readEntityArray(e){const t=this.readUInt16(),i=[];for(let s=0;s<t;s++)i[s]=e(this);return i}readUInt8(){const e=this.buffer.getUint8(this.offset);return this.offset+=1,e}readUInt16(){const e=this.buffer.getUint16(this.offset,!0);return this.offset+=2,e}readUInt64(){const e=this.buffer.getBigUint64(this.offset,!0);return this.offset+=8,e}}},486:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BinaryWriter=void 0;t.BinaryWriter=class{constructor(){this.buffer=new DataView(new ArrayBuffer(8192)),this.offset=0}hasBytes(){return Boolean(this.offset)}writeByteArray(e){this.writeUInt16(e.byteLength);for(let t=0;t<e.byteLength;t++)this.writeUInt8(e.getInt8(t))}writeEntityArray(e){this.writeUInt16(e.length),e.forEach((e=>e.write(this)))}writeUInt8(e){this.buffer.setUint8(this.offset,e),this.offset+=1}writeUInt16(e){this.buffer.setUint16(this.offset,e,!0),this.offset+=2}writeUInt64(e){this.buffer.setBigUint64(this.offset,e,!0),this.offset+=8}toBuffer(){return new DataView(this.buffer.buffer,0,this.offset)}}},780:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Core=void 0;const s=i(207);class r{constructor(e,t){this.address=e,this.channel=t,this.entityList=new s.EntityList(this.address+s.coreOffsets.clEntityList,this.channel),this.levelName=new s.LevelName(this.address+s.coreOffsets.levelName),this.localPlayer=new s.LocalPlayer(this.address+s.coreOffsets.localPlayer),this.channel.create(this.entityList),this.channel.create(this.levelName),this.channel.create(this.localPlayer)}static async createAsync(e){const t=(await e.processesAsync()).find((e=>e.command.toLowerCase().endsWith("r5apex.exe")));if(!t)throw new Error("Invalid process!");const i=await t.regionsAsync(),a=i.find((e=>e.pathname.toLowerCase().endsWith("r5apex.exe")))??i.find((e=>1==e.perms&&e.pathname.startsWith("/memfd")))??i.find((e=>e.start===BigInt(5368709120)));if(!a)throw new Error("Invalid region!");return new r(a.start,new s.api.Channel(t.pid))}async runAsync(e){await this.channel.runAsync(e)}}t.Core=r},350:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EntityList=void 0;const s=i(207),r=Array(60).fill(0).map(((e,t)=>t));class a extends s.api.Adapter{constructor(e,t,i=r.map((e=>new s.UInt64(e<<5,1e3)))){super(new s.api.Entity(e,i)),this.channel=t,this.pointers=i,this.players={},this.source.emitter.addEventListener("postReceive",this.onPostReceive.bind(this))}get value(){return Object.values(this.players).filter((e=>e.isValid))}handleCreates(e){for(const t of e){const e=t.toString(16);if(!this.players[e]){const i=new s.Player(t);this.players[e]=i,this.channel.create(i)}}}handleDeletes(e){for(const t of e){const e=t.toString(16);this.players[e]&&(this.channel.delete(this.players[e]),delete this.players[e])}}onPostReceive(){const e=this.pointers.map((e=>e.value)).filter(Boolean);this.handleCreates(e.filter((e=>!this.players[e.toString(16)]))),this.handleDeletes(Object.keys(this.players).map((e=>BigInt(`0x${e}`))).filter((t=>!e.includes(t))))}}t.EntityList=a},617:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LevelName=void 0;const s=i(207);class r extends s.api.Adapter{constructor(e,t=new s.CString(0,1e3,32)){super(new s.api.Entity(e,[t])),this.levelName=t}get value(){return this.levelName.value}}t.LevelName=r},121:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocalPlayer=void 0;const s=i(207);class r extends s.api.Adapter{constructor(e,t=new s.UInt64(0,1e3)){super(new s.api.Entity(e,[t])),this.localPlayer=t}get value(){return this.localPlayer.value}}t.LocalPlayer=r},379:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;const s=i(207);class r extends s.api.Adapter{constructor(e,t=new s.Vector(s.entityOffsets.localOrigin),i=new s.UInt8(s.entityOffsets.iTeamNum,1e3),r=new s.UInt64(s.entityOffsets.iName,1e3),a=new s.UInt8(s.entityOffsets.glowEnable),n=new s.UInt8(s.entityOffsets.glowThroughWall),o=new s.UInt8(s.playerOffsets.lifeState),c=new s.Vector(s.playerOffsets.viewAngles),l=new s.UInt8(s.playerOffsets.bleedoutState)){super(new s.api.Entity(e,[t,i,r,a,n,o,c,l])),this.address=e,this.localOrigin=t,this.teamNum=i,this.name=r,this.glowEnable=a,this.glowThroughWalls=n,this.lifeState=o,this.viewAngles=c,this.bleedoutState=l}get isValid(){return this.name.value&&!this.lifeState.value&&!s.shallowEquals(this.localOrigin.value,{x:0,y:0,z:0})}createColor(e){return this.isSameTeam(e)?this.bleedoutState.value?"#FFFF00":"#00FF00":this.bleedoutState.value?"#FFA500":"#FF0000"}isSameTeam(e){return this.teamNum.value===e.teamNum.value}toString(){return s.serialize(this)}}t.Player=r},682:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shallowEquals=t.serialize=void 0,t.serialize=function(e){return`(${Object.entries(e).sort((([e],[t])=>e.localeCompare(t))).map((([e,t])=>`${e}=${t}`)).join(",")})`},t.shallowEquals=function(e,t){return Object.entries(e).map((([e,i])=>[i,t[e]])).every((([e,t])=>e===t))}},207:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,r)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.api=void 0;var a=i(610);Object.defineProperty(t,"api",{enumerable:!0,get:function(){return a.api}}),r(i(682),t),r(i(350),t),r(i(617),t),r(i(121),t),r(i(379),t),r(i(324),t),r(i(661),t),r(i(169),t),r(i(925),t),r(i(260),t),r(i(300),t),r(i(353),t),r(i(780),t)},324:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.coreOffsets=void 0,t.coreOffsets={levelName:BigInt("0x1380370"),clEntityList:BigInt("0x1a203b8"),localPlayer:BigInt("0x1dd15e8")}},661:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.entityOffsets=void 0,t.entityOffsets={localOrigin:Number("0x158"),iTeamNum:Number("0x448"),iName:Number("0x589"),glowEnable:Number("0x3c8"),glowThroughWall:Number("0x3d0")}},169:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.playerOffsets=void 0,t.playerOffsets={lifeState:Number("0x798"),viewAngles:Number("0x2580"),bleedoutState:Number("0x2720")}},925:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CString=void 0;const s=i(207);class r extends s.api.Adapter{constructor(e,t,i){super(new s.api.EntityMember(e,t,i))}get value(){let e="";return function(e,t){for(let i=0;i<e.byteLength;i++){const s=e.getUint8(i);if(0===s)break;t(String.fromCharCode(s))}}(this.source.buffer,(t=>e+=t)),e}toString(){return this.value.toString()}}t.CString=r},300:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UInt64=void 0;const s=i(207);class r extends s.api.Adapter{constructor(e,t=0){super(new s.api.EntityMember(e,t,8))}get value(){return this.source.buffer.getBigUint64(0,!0)}set value(e){e!==this.value&&(this.source.sendChange=new DataView(new ArrayBuffer(8)),this.source.sendChange.setBigUint64(0,e,!0))}toString(){return this.value.toString()}}t.UInt64=r},260:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UInt8=void 0;const s=i(207);class r extends s.api.Adapter{constructor(e,t=0){super(new s.api.EntityMember(e,t,1))}get value(){return this.source.buffer.getUint8(0)}set value(e){e!==this.value&&(this.source.sendChange=new DataView(new ArrayBuffer(1)),this.source.sendChange.setInt8(0,e))}toString(){return this.value.toString()}}t.UInt8=r},353:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=void 0;const s=i(207);class r extends s.api.Adapter{constructor(e,t=0){super(new s.api.EntityMember(e,t,12))}get value(){return{x:this.source.buffer.getFloat32(0,!0),y:this.source.buffer.getFloat32(4,!0),z:this.source.buffer.getFloat32(8,!0)}}set value(e){this.value.x===e.x&&this.value.y===e.y&&this.value.z===e.z||(this.source.sendChange=new DataView(new ArrayBuffer(12)),this.source.sendChange.setFloat32(0,e.x,!0),this.source.sendChange.setFloat32(4,e.y,!0),this.source.sendChange.setFloat32(8,e.z,!0))}toString(){return this.value.toString()}}t.Vector=r},945:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Aimbot=void 0;t.Aimbot=class{updateStates(e,t,i){if(t.bleedoutState.value)return;const s="mp_rr_canyonlands_staging"==e?this.createDummyPLayer():this.findClosestEnemyPlayer(t,i);if(null==s)return;const r=this.calcDistance(t,s);let a,n;if(r<=200)a=50,n=1;else{if(!(r<=400))return;a=10,n=4}const o=this.createNewViewingAnglesStats(t,s,n);o.yawDeltaAbs>a||o.pitchDeltaAbs>a||this.writeNewViewingAngles(t,o)}writeNewViewingAngles(e,t){let i=e.viewAngles.value;i.y-=t.yawDeltaSmoothed,i.x-=t.pitchDeltaSmoothed,e.viewAngles.value=i}createNewViewingAnglesStats(e,t,i){const s=this.calcViewAnglesToTarget(e,t),r=e.viewAngles.value.y,a=s.yaw,n=this.calcYawDeltaAndFlipIfNeeded(r,a),o=Math.abs(n),c=n/i,l=e.localOrigin.value.y<t.localOrigin.value.y,h=e.viewAngles.value.x,u=s.pitch,d=h-u;return{currentYaw:r,desiredYaw:a,yawDelta:n,yawDeltaAbs:o,yawDeltaSmoothed:c,flipYaw:l,currentPitch:h,desiredPitch:u,pitchDelta:d,pitchDeltaAbs:Math.abs(d),pitchDeltaSmoothed:d/i}}calcYawDeltaAndFlipIfNeeded(e,t){let i=e-t;return Math.abs(i)>180&&(e>0&&t<0&&(i-=360),e<0&&t>0&&(i=180-Math.abs(e)+180-Math.abs(t))),i}calcViewAnglesToTarget(e,t){const i=t.localOrigin.value.x-e.localOrigin.value.x,s=t.localOrigin.value.y-e.localOrigin.value.y,r=t.localOrigin.value.z-e.localOrigin.value.z,a=Math.sqrt(Math.pow(Math.abs(i),2)+Math.pow(Math.abs(s),2)),n=Math.atan2(s,i)*(180/Math.PI);let o=Number(n.toFixed(9));Math.abs(o)>180&&(o=180);const c=Math.atan(r/-a)*(180/Math.PI);let l=Number(c.toFixed(9));return Math.abs(l)>90&&(l=90),{pitch:l,yaw:o}}findClosestEnemyPlayer(e,t){const i=t.filter((t=>!t.isSameTeam(e)&&!t.bleedoutState.value));if(0==i.length)return null;let s=i[0],r=this.calcDistance(e,s);for(let t=1;t<i.length;t++){const a=i[t],n=this.calcDistance(e,a);n<r&&(s=a,r=n)}return s}createDummyPLayer(){return{localOrigin:{value:{x:31524.71875,y:-6710.02197265625,z:-29235.982421875}}}}calcDistance(e,t){const i=e.localOrigin.value.x-t.localOrigin.value.x,s=e.localOrigin.value.y-t.localOrigin.value.y,r=e.localOrigin.value.z-t.localOrigin.value.z;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2)+Math.pow(r,2))}}},951:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Map=void 0;t.Map=class{constructor(e){this.canvas=e,this.image=new Image,this.ratioX=0,this.ratioY=0,this.scaleR=0,this.scaleX=0,this.scaleY=0,this.shiftX=0,this.shiftY=0,this.context=e.getContext("2d")}refresh(e){this.fetch(e),this.update(),this.renderBackground()}renderAll(e,t){for(const i of t)this.renderOne(i.localOrigin.value,i.createColor(e))}renderOne(e,t){if(!this.map)return;const i=this.shiftX+1/this.image.width*this.scaleX*(e.x-this.map.x)/this.ratioX,s=this.shiftY+1/this.image.height*this.scaleY*(e.y-this.map.y)/-this.ratioY;this.context.beginPath(),this.context.arc(i,s,8*this.scaleR,0,2*Math.PI),this.context.fillStyle=t,this.context.fill()}fetch(e){this.map=function(e){switch(e){case"mp_rr_canyonlands_mu3":return{x:-37541,y:43886};case"mp_rr_desertlands_mu3":return{x:-45056,y:45055};case"mp_rr_olympus_mu2":return{x:-52024,y:48025};case"mp_rr_tropic_island_mu1":return{x:-50606,y:52139};default:return}}(e),this.image.src=this.map?`images/maps/${e}.webp`:"images/maps.webp"}renderBackground(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.drawImage(this.image,0,0,this.image.width,this.image.height,this.shiftX,this.shiftY,this.scaleX,this.scaleY)}update(){this.map&&(this.ratioX=(this.map.y-this.map.x)/this.image.width,this.ratioY=(this.map.y-this.map.x)/this.image.height,this.scaleR=Math.min(this.canvas.width/this.image.width,this.canvas.height/this.image.height),this.scaleX=this.image.width*this.scaleR,this.scaleY=this.image.height*this.scaleR,this.shiftX=(this.canvas.width-this.scaleX)/2,this.shiftY=(this.canvas.height-this.scaleY)/2)}}},767:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Radar=void 0;t.Radar=class{constructor(e,t=200,i=8){this.canvas=e,this.maximumDistance=t,this.numberOfRings=i,this.centerX=0,this.centerY=0,this.outerRadius=0,this.context=e.getContext("2d")}refresh(){this.update(),this.renderBackground(),this.renderLines(),this.renderRings()}renderAll(e,t){for(const i of t)i.address!==e.address&&this.renderOne(e,i.localOrigin.value,i.createColor(e))}renderOne(e,t,i){const s=.0254*(e.localOrigin.value.x-t.x),r=.0254*(e.localOrigin.value.y-t.y),a=Math.sqrt(Math.pow(s,2)+Math.pow(r,2));if(a<this.maximumDistance){const t=this.outerRadius/this.maximumDistance,n=Math.sign(r)*Math.acos(s/a)-e.viewAngles.value.y*Math.PI/180,o=this.centerX+Math.sin(n)*a*t,c=this.centerY+Math.cos(n)*a*t;this.context.beginPath(),this.context.arc(o,c,this.outerRadius/40,0,2*Math.PI),this.context.fillStyle=i,this.context.fill()}}renderBackground(){this.context.beginPath(),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.arc(this.centerX,this.centerY,this.outerRadius,0,2*Math.PI),this.context.fillStyle="#000",this.context.fill()}renderLines(){this.context.strokeStyle="#FFF";for(let e=0;e<8;e++){const t=this.centerX+this.outerRadius*Math.cos(e*Math.PI*.25),i=this.centerY+this.outerRadius*Math.sin(e*Math.PI*.25);this.context.beginPath(),this.context.moveTo(this.centerX,this.centerY),this.context.lineTo(t,i),this.context.stroke()}}renderRings(){this.context.strokeStyle="#FFF";for(let e=1;e<=this.numberOfRings;e++)this.context.beginPath(),this.context.arc(this.centerX,this.centerY,this.outerRadius*e/this.numberOfRings,0,2*Math.PI),this.context.stroke()}update(){this.centerX=this.canvas.width/2,this.centerY=this.canvas.height/2,this.outerRadius=(this.canvas.width>this.canvas.height?this.canvas.height:this.canvas.width)/2}}},123:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Sense=void 0;t.Sense=class{constructor(e=200){this.maximumDistance=e}updateStates(e,t){for(const i of t){if(i.isSameTeam(e)||[0,255].includes(i.glowEnable.value))continue;const t=.0254*(e.localOrigin.value.x-i.localOrigin.value.x),s=.0254*(e.localOrigin.value.y-i.localOrigin.value.y);Math.sqrt(Math.pow(t,2)+Math.pow(s,2))<this.maximumDistance&&(i.glowEnable.value=7,i.glowThroughWalls.value=2)}}}},323:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,r)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.core=void 0;var a=i(610);Object.defineProperty(t,"core",{enumerable:!0,get:function(){return a.core}}),r(i(951),t),r(i(767),t),r(i(123),t),r(i(945),t)},610:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.features=t.core=t.api=void 0,t.api=i(575),t.core=i(207),t.features=i(323)},842:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ui=void 0;const s=i(610),r=i(732),a=document.querySelector(".container"),n=document.querySelector(".content"),o=new s.api.Server;async function c(e){const t=await s.core.Core.createAsync(o).catch((()=>{}));return!!t&&(a.style.display="none",await e(t).catch(console.error.bind(console)),a.style.display="inherit",!0)}t.ui=async function(e){for(;;)switch(await o.versionAsync()){case 0:return void(n.innerHTML=r.language.errorDriver);case 4:n.innerHTML=await c(e)?r.language.error:r.language.errorProcess,await new Promise((e=>setTimeout(e,5e3)));break;default:return void(n.innerHTML=r.language.errorVersion)}}},732:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.language=void 0,t.language={error:"An error occurred. Check your console.",errorDriver:'Load this connector in your <a href="https://github.com/XRadius/http-driver" target="_blank">http-driver</a>.',errorProcess:"Game not found. Did you run it?",errorVersion:'Your <a href="https://github.com/XRadius/http-driver" target="_blank">http-driver</a> is outdated.'}}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,i),a.exports}(()=>{const e=i(610),t=i(842),s=document.querySelector(".canvas"),r=new e.features.Map(s);s.addEventListener("dblclick",(()=>{(document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen()).catch()})),(0,t.ui)((t=>async function(e,t){await e.runAsync((()=>{const i=e.levelName.value,a=e.entityList.value,n=a.find((t=>t.address===e.localPlayer.value));s.height=window.innerHeight,s.width=window.innerWidth,function(e,t,i){if(r.refresh(e),!t)return;r.renderAll(t,i)}(i,n,a),function(e,t,i){if(!e)return;if(!location.hash.includes("enable-sense"))return;i.updateStates(e,t)}(n,a,t)}))}(t,new e.features.Sense).finally((()=>{s.height=0,s.width=0}))))})()})();